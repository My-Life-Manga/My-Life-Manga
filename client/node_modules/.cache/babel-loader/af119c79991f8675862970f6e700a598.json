{"ast":null,"code":"var _jsxFileName = \"/Users/crystalochoa/Desktop/My-Life-Manga/client/src/pages/profileEdit/ProfileEdit.jsx\",\n    _s = $RefreshSig$();\n\nimport \"./profileEdit.scss\";\nimport { useState } from \"react\";\nimport { useQuery, useQueryClient, useMutation } from \"@tanstack/react-query\";\nimport { makeRequest } from \"../../axios\";\nimport { useLocation } from \"react-router-dom\";\nimport { useContext, useEffect } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nconst ProfileEdit = () => {\n  _s();\n\n  const [name, setName] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [website, setWebsite] = useState(\"\");\n  const [coverPic, setCoverPic] = useState(null);\n  const [profilePic, setProfilePic] = useState(null);\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const userId = currentUser.id;\n  const {\n    isLoading,\n    error,\n    data\n  } = useQuery([\"user\"], () => makeRequest.get(\"/users/find/\" + userId).then(res => {\n    return res.data;\n  }));\n  useEffect(() => {\n    if (!isLoading && data) {\n      setName(data.name);\n      setCity(data.city);\n      setWebsite(data.website);\n    }\n  }, [isLoading, data]);\n  const queryClient = useQueryClient();\n  const updateMutation = useMutation(formData => makeRequest.put(\"/users/\" + userId, formData), {\n    onSuccess: () => {\n      queryClient.invalidateQueries([\"user\"]);\n    }\n  });\n\n  const handleUpdate = e => {\n    e.preventDefault();\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"city\", city);\n    formData.append(\"website\", website);\n\n    if (coverPic) {\n      formData.append(\"coverPic\", coverPic);\n    }\n\n    if (profilePic) {\n      formData.append(\"profilePic\", profilePic);\n    }\n\n    updateMutation.mutate(formData);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"profileEdit\",\n    children: isLoading ? \"loading\" : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"images\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/upload/\" + data.coverPic,\n          alt: \"\",\n          className: \"cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n          src: \"/upload/\" + data.profilePic,\n          alt: \"\",\n          className: \"profilePic\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 70,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleUpdate,\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Name\",\n          value: name,\n          onChange: e => setName(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"City\",\n          value: city,\n          onChange: e => setCity(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          placeholder: \"Website\",\n          value: website,\n          onChange: e => setWebsite(e.target.value)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"coverPic\",\n            children: \"Cover Photo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 96,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"coverPic\",\n            accept: \"image/*\",\n            onChange: e => setCoverPic(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 97,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 95,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: \"profilePic\",\n            children: \"Profile Photo:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"file\",\n            id: \"profilePic\",\n            accept: \"image/*\",\n            onChange: e => setProfilePic(e.target.files[0])\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 106,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          children: \"Update Profile\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 63,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProfileEdit, \"JzGJLEpxLd+b4OMkcQZ1L635Lh4=\", false, function () {\n  return [useQuery, useQueryClient, useMutation];\n});\n\n_c = ProfileEdit;\nexport default ProfileEdit;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProfileEdit\");","map":{"version":3,"sources":["/Users/crystalochoa/Desktop/My-Life-Manga/client/src/pages/profileEdit/ProfileEdit.jsx"],"names":["useState","useQuery","useQueryClient","useMutation","makeRequest","useLocation","useContext","useEffect","AuthContext","ProfileEdit","name","setName","city","setCity","website","setWebsite","coverPic","setCoverPic","profilePic","setProfilePic","currentUser","userId","id","isLoading","error","data","get","then","res","queryClient","updateMutation","formData","put","onSuccess","invalidateQueries","handleUpdate","e","preventDefault","FormData","append","mutate","target","value","files"],"mappings":"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","sourcesContent":["import \"./profileEdit.scss\";\nimport { useState } from \"react\";\nimport { useQuery, useQueryClient, useMutation } from \"@tanstack/react-query\";\nimport { makeRequest } from \"../../axios\";\nimport { useLocation } from \"react-router-dom\";\nimport { useContext, useEffect } from \"react\";\nimport { AuthContext } from \"../../context/authContext\";\n\nconst ProfileEdit = () => {\n  const [name, setName] = useState(\"\");\n  const [city, setCity] = useState(\"\");\n  const [website, setWebsite] = useState(\"\");\n  const [coverPic, setCoverPic] = useState(null);\n  const [profilePic, setProfilePic] = useState(null);\n\n  const { currentUser } = useContext(AuthContext);\n\n  const userId = currentUser.id;\n\n  const { isLoading, error, data } = useQuery([\"user\"], () =>\n    makeRequest.get(\"/users/find/\" + userId).then((res) => {\n      return res.data;\n    })\n  );\n\n  useEffect(() => {\n    if (!isLoading && data) {\n      setName(data.name);\n      setCity(data.city);\n      setWebsite(data.website);\n    }\n  }, [isLoading, data]);\n\n  const queryClient = useQueryClient();\n\n  const updateMutation = useMutation(\n    (formData) => makeRequest.put(\"/users/\" + userId, formData),\n    {\n      onSuccess: () => {\n        queryClient.invalidateQueries([\"user\"]);\n      },\n    }\n  );\n\n  const handleUpdate = (e) => {\n    e.preventDefault();\n\n    const formData = new FormData();\n    formData.append(\"name\", name);\n    formData.append(\"city\", city);\n    formData.append(\"website\", website);\n    if (coverPic) {\n      formData.append(\"coverPic\", coverPic);\n    }\n    if (profilePic) {\n      formData.append(\"profilePic\", profilePic);\n    }\n\n    updateMutation.mutate(formData);\n  };\n\n  return (\n    <div className=\"profileEdit\">\n      {isLoading ? (\n        \"loading\"\n      ) : (\n        <>\n          <div className=\"images\">\n            <img src={\"/upload/\" + data.coverPic} alt=\"\" className=\"cover\" />\n            <img\n              src={\"/upload/\" + data.profilePic}\n              alt=\"\"\n              className=\"profilePic\"\n            />\n          </div>\n          <form onSubmit={handleUpdate}>\n            <input\n              type=\"text\"\n              placeholder=\"Name\"\n              value={name}\n              onChange={(e) => setName(e.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"City\"\n              value={city}\n              onChange={(e) => setCity(e.target.value)}\n            />\n            <input\n              type=\"text\"\n              placeholder=\"Website\"\n              value={website}\n              onChange={(e) => setWebsite(e.target.value)}\n            />\n            <div>\n              <label htmlFor=\"coverPic\">Cover Photo:</label>\n              <input\n                type=\"file\"\n                id=\"coverPic\"\n                accept=\"image/*\"\n                onChange={(e) => setCoverPic(e.target.files[0])}\n              />\n            </div>\n            <div>\n              <label htmlFor=\"profilePic\">Profile Photo:</label>\n              <input\n                type=\"file\"\n                id=\"profilePic\"\n                accept=\"image/*\"\n                onChange={(e) => setProfilePic(e.target.files[0])}\n              />\n            </div>\n            <button type=\"submit\">Update Profile</button>\n          </form>\n        </>\n      )}\n    </div>\n  );\n};\n\nexport default ProfileEdit;\n"]},"metadata":{},"sourceType":"module"}